/* Comprimido por DevSign - 2025-11-04 17:20 */
function addDecorationToButtons(t){const e=t.currentDate,a=["Halloween","Christmas","Thanksgiving","NewYear"];let n=null;for(const o of a)if(t._enabled&&t._enabled[o]&&t._isThemeDate(o,e)){n=o;break}const o=document.querySelectorAll("button");if(!n)return void o.forEach(t=>{const e=t.querySelector(".halloween-btn-decoration");e&&e.remove()});let r={};try{const e=t.getAttribute("resources");e&&(r=JSON.parse(e))}catch(t){r={}}let i=r[n]&&r[n].bottomleft||t.getAttribute("bottomleft")||t._defaultImages[2]||t._defaultImages[0];o.forEach(t=>{if(t.querySelector(".halloween-btn-decoration"))return;const e=document.createElement("img");e.src=i,e.alt="decoración halloween",e.className="halloween-btn-decoration",e.style.position="absolute",e.style.left="-1.2em",e.style.bottom="-1.2em",e.style.width="2.5em",e.style.height="2.5em",e.style.objectFit="contain",e.style.pointerEvents="none",e.style.zIndex="10",e.style.userSelect="none",e.style.transition="transform 0.3s",t.style.position="relative",t.style.overflow="visible",t.appendChild(e)})}var FECHA_FORZADA=new Date(2025,11,26),HalloweenWidget=class extends HTMLElement{static get observedAttributes(){return["enable","date","resources","topleft","topright","bottomleft","bottomright","topleftanimation","toprightanimation","bottomleftanimation","bottomrightanimation","topleftsize","toprightsize","bottomleftsize","bottomrightsize","forzarfechaactiva","fechaforzada"]}constructor(){super(),this._shadow=this.attachShadow({mode:"open"}),this._root=document.createElement("div"),this._root.className="halloween-widget-root",this._root.innerHTML="<slot></slot>",this._forzarFechaActiva=!1,this._fechaForzada=null,this._defaultThemeDateRanges={Halloween:{dateRange:["10-01","10-31"]},Christmas:{dateRange:["12-01","12-31"]},Thanksgiving:{dateRange:["11-01","11-30"]},NewYear:{dateRange:["01-01","01-15"]}};const t=document.createElement("style");t.textContent="\n\t\t\t\t   :host {\n\t\t\t\t\t   display: block;\n\t\t\t\t\t   position: relative;\n\t\t\t\t   }\n\t\t\t\t   .decoration {\n\t\t\t\t\t   position: fixed;\n\t\t\t\t\t   pointer-events: none;\n\t\t\t\t\t   z-index: 9999;\n\t\t\t\t\t   animation: floatY 3s ease-in-out infinite alternate;\n\t\t\t\t   }\n\t\t\t\t   .decoration.img-bounce {\n\t\t\t\t\t   animation: bounce 2s infinite alternate;\n\t\t\t\t   }\n\t\t\t\t   .decoration img { display: block; max-width: 260px; min-width: 180px; width: 100%; height: auto; }\n\t\t\t\t   .corner-top-left { top: 0; left: 0; margin: 0; padding: 0; }\n\t\t\t\t   .corner-top-right { top: 0; right: 0; margin: 0; padding: 0; }\n\t\t\t\t   .corner-bottom-left { bottom: 0; left: 0; margin: 0; padding: 0; }\n\t\t\t\t   .corner-bottom-right { bottom: 0; right: 0; margin: 0; padding: 0; }\n\t\t\t\t   @keyframes floatY {\n\t\t\t\t\t   0% { transform: translateY(0); }\n\t\t\t\t\t   100% { transform: translateY(30px); }\n\t\t\t\t   }\n\t\t\t\t   @keyframes spin {\n\t\t\t\t\t   0% { transform: rotate(0deg); }\n\t\t\t\t\t   100% { transform: rotate(360deg); }\n\t\t\t\t   }\n\t\t\t\t   @keyframes bounce {\n\t\t\t\t\t   0% { transform: translateY(0); }\n\t\t\t\t\t   100% { transform: translateY(-20px); }\n\t\t\t\t   }\n\t\t\t   ",this._shadow.appendChild(t),this._shadow.appendChild(this._root),this._shadow.appendChild(t),this._shadow.appendChild(this._root),this._enabled={Halloween:!1,Christmas:!1,Thanksgiving:!1,NewYear:!1},this._currentDate=null,this._defaultImages=["https://firebasestorage.googleapis.com/v0/b/interscopemediacrm.appspot.com/o/ecd64ff363965d499c45bb74cf490d36.gif?alt=media&token=e5abb649-c221-431f-a80a-439ac842a8e3","https://firebasestorage.googleapis.com/v0/b/interscopemediacrm.appspot.com/o/spider.png?alt=media&token=e76152a3-561c-4b05-a8a4-5971c08a4031","https://firebasestorage.googleapis.com/v0/b/interscopemediacrm.appspot.com/o/halloween.webp?alt=media&token=dd44ec6f-3f17-44f2-9fa4-352a360eee01","https://firebasestorage.googleapis.com/v0/b/interscopemediacrm.appspot.com/o/halloween.webp?alt=media&token=dd44ec6f-3f17-44f2-9fa4-352a360eee01"],this._cornerAttrs=["topleft","topright","bottomleft","bottomright"],this._cornerAnimAttrs=["topleftanimation","toprightanimation","bottomleftanimation","bottomrightanimation"],this._positions=["corner-top-left","corner-top-right","corner-bottom-left","corner-bottom-right"],this._cornerSizeAttrs=["topleftsize","toprightsize","bottomleftsize","bottomrightsize"],this._repeatDecorations=1}attributeChangedCallback(t,e,a){if("enable"===t&&this._parseEnableAttr(a),"date"===t&&this._parseDateAttr(a),"forzarfechaactiva"===t&&(this._forzarFechaActiva="true"===a||!0===a),"fechaforzada"===t){const t=new Date(a);this._fechaForzada=isNaN(t)?null:t}("resources"===t||this._cornerAttrs.includes(t)||this._cornerAnimAttrs.includes(t)||this._cornerSizeAttrs.includes(t))&&this._updateDecorations(),this._updateDecorations()}connectedCallback(){this._updateDecorations(),setTimeout(()=>addDecorationToButtons(this),100)}set enabled(t){this._enabled=Object.assign({Halloween:!1,Christmas:!1,Thanksgiving:!1,NewYear:!1},t||{}),this._updateDecorations()}get enabled(){return this._enabled}set currentDate(t){if(null==t)this._currentDate=null;else if(t instanceof Date)this._currentDate=new Date(t.getFullYear(),t.getMonth(),t.getDate());else{const e=new Date(t);isNaN(e)?this._currentDate=null:this._currentDate=new Date(e.getFullYear(),e.getMonth(),e.getDate())}this._updateDecorations()}get currentDate(){return this._forzarFechaActiva&&this._fechaForzada instanceof Date&&!isNaN(this._fechaForzada)?this._fechaForzada:this._currentDate?this._currentDate:new Date}set resources(t){this._resources=Object.assign({Halloween:[],Christmas:[],Thanksgiving:[],NewYear:[]},t||{}),this._updateDecorations()}get resources(){return this._resources}_parseEnableAttr(t){const e={Halloween:!1,Christmas:!1,Thanksgiving:!1,NewYear:!1};t?(t.split(",").map(t=>t.trim()).filter(Boolean).forEach(t=>{e.hasOwnProperty(t)&&(e[t]=!0)}),this._enabled=e):this._enabled=e}_parseDateAttr(t){if(!t)return void(this._currentDate=null);const e=new Date(t);isNaN(e)?this._currentDate=null:this._currentDate=new Date(e.getFullYear(),e.getMonth(),e.getDate())}_isThemeDate(t,e){e instanceof Date||(e=new Date);let a={};try{const t=this.getAttribute("resources");t&&(a=JSON.parse(t))}catch(t){a={}}let n=a[t]||{};if(!n.dateRange&&this._defaultThemeDateRanges[t]&&(n=this._defaultThemeDateRanges[t]),n.dateRange&&Array.isArray(n.dateRange)&&2===n.dateRange.length){const[t,a]=n.dateRange,[o,r]=t.split("-").map(Number),[i,s]=a.split("-").map(Number),l=new Date(e.getFullYear(),e.getMonth(),e.getDate()),c=new Date(e.getFullYear(),o-1,r),h=new Date(e.getFullYear(),i-1,s);return l>=c&&l<=h}const o=e.getMonth(),r=e.getDate();if("Halloween"===t)return 9===o&&31===r;if("Christmas"===t)return 11===o&&(24===r||25===r||26===r);if("Thanksgiving"===t){if(10!==o)return!1;const t=e.getFullYear();return r===1+(4-new Date(t,10,1).getDay()+7)%7+21}return"NewYear"===t&&(0===o&&r>=1&&r<=7)}_clearDecorations(){this._shadow.querySelectorAll(".decoration").forEach(t=>t.remove())}_updateDecorations(){if(!this._shadow)return;this._clearDecorations();const t=this.currentDate,e=["Halloween","Christmas","Thanksgiving","NewYear"];let a=null;for(const n of e)if(this._enabled&&this._enabled[n]&&this._isThemeDate(n,t)){a=n;break}if(!a)return;let n={};try{const t=this.getAttribute("resources");t&&(n=JSON.parse(t))}catch(t){n={}}let o=n[a]||{};this._positions.forEach((t,e)=>{try{const n=document.createElement("div");let r;if(r=void 0!==o[this._cornerAttrs[e]]?o[this._cornerAttrs[e]]:this.getAttribute(this._cornerAttrs[e])?this.getAttribute(this._cornerAttrs[e]):void 0,!r||""===r)return;let i=o[this._cornerAttrs[e]+"size"]||this.getAttribute(this._cornerSizeAttrs[e])||"16rem",s=(o[this._cornerAttrs[e]+"animation"]||this.getAttribute(this._cornerAnimAttrs[e])||"float").toLowerCase(),l="";"bounce"===s?l="img-bounce":"static"===s&&(l=""),n.className=`decoration ${t} ${l}`,n.style.animation="static"!==s?"img-bounce"===l?"bounce 2s infinite alternate":"floatY 3s ease-in-out infinite alternate":"none",n.style.width=i,n.style.opacity="0.95",n.style.animationDelay=.3*e+"s";const c=document.createElement("img");c.src=r,c.alt=`${a.toLowerCase()}-decoration-${t}`,c.style.maxWidth=i,c.style.minWidth="80px",n.appendChild(c),this._shadow.appendChild(n)}catch(t){console.warn("No se pudo crear decoración:",t)}})}},halloween_default=HalloweenWidget;customElements.define("halloween-widget",halloween_default);
